---
title: "Examine and assemble Mike Burrows' taxonomic group information"
output: 
    html_notebook: default
    #html_document: default
    #github_document: default # latter for displaying on github
---

# Load data
```{r setup}
library(data.table)

knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) # tell RStudio to use project root directory as the root for this notebook. Needed since we are storing code in a separate directory.
```

```{r load data}
# BioTime
load('data/biotime_blowes/bt_malin.Rdata')
bt <- data.table(bt_malin); rm(bt_malin)
bt <- bt[!duplicated(cbind(STUDY_ID, rarefyID)), .(STUDY_ID, rarefyID, rarefyID_x, rarefyID_y, REALM, taxa_mod)]

# load Taxonomic group
tax <- fread('data/taxa_burrows/TaxGroupByStudy.csv')

```

# Merge and examine
```{r}

# trim Burrows taxanomic group to one group per study and merge in
tax <- tax[!duplicated(cbind(STUDY_ID, domtax)), .(STUDY_ID, domtax)]
sum(duplicated(tax$STUDY_ID)) # 0: good
bt <- merge(bt, tax[, .(STUDY_ID, taxa_burrows = domtax)], by = 'STUDY_ID', all.x = TRUE)
```

How many missing tax groups from Burrows (and proportion)?
```{r}
bt[, sum(is.na(taxa_burrows))]
bt[, sum(is.na(taxa_burrows))/.N]
```

How do the Burrows and Blowes groups compare?
```{r}
bt[, table(taxa_mod)]
bt[, table(taxa_burrows)]
bt[, table(taxa_burrows, taxa_mod)]

```
Burrows has a couple small groups (Amphibians, Gastropods, Reptiles), but avoid catch-all groups like All or Benthos.
Taxa_mod Reptiles is also small.
Zooplankton (Burrows) vs. Plant (taxa_mod) is a bit odd. Other ones seem to line up ok.

We'll stick with using taxa_mod for now.